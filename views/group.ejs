<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Group Details</title>
  <link rel="stylesheet" href="/css/group.css">

  <script src="/js/groups.js" defer></script>

</head>
<body>
    <div id="app">
        <div class="sidebar">
            <!-- Include menu.ejs for sidebar navigation -->
            <%- include('menu') %>
        </div>

        <div class="content">

            <section class="big-container">
                <span class = "title">
                    <span><%=groupName%></span>
                        <span>
                            <button class="blue" onclick="showRenameGroupPopup('<%= groupId %>')">
                                <img src="/icons/rename.png" alt="Rename" class="white-icon">
                            </button>
                            <button class="red" onclick="showDeleteGroupPopup('<%= groupId %>')">
                                <img src="/icons/delete.png" alt="Delete" class="white-icon">
                            </button>
                        </span>
                </span>
                <hr>
                <section class="members">
                    <h2>Members</h2>
                    <button class="green-button" onclick="showAddMemberPopup('<%= groupId %>')">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                    
                    <ul>
                        <% if (members && members.length > 0) { %>
                        <% members.forEach(member => { %>
                            <li class="member-item">
                            <span><strong><%= member.name %> <%= member.surname %></strong></span>
                            <span>
                                <span class="badge 
                                    <%= member.role === 0 ? 'badge-admin' : member.role === 1 ? 'badge-cofounder' : 'badge-member' %>">
                                    <%= member.role === 0 ? 'Admin' : member.role === 1 ? 'Co-Founder' : 'Member' %>
                                </span>
                                <button class="blue-button fill-verticaly" onclick="showChangeRolePopup('<%= member.id %>', '<%= member.role %>')">
                                    <i class="fas fa-cog"></i>
                                </button>

                            </span>
                            
                            </li>
                        <% }) %>

                        <% } else { %>
                        <li>No members in this group.</li>
                        <% } %>
                    </ul>
                </section>
                <section class="events">
                <h2>Upcoming Events</h2>
                <ul>
                    <% if (events && events.length > 0) { %>
                    <% events.forEach(event => { %>
                        <li class="event-item">
                        <div class="event-details">
                            <strong><h2><%= event.name %></h2></strong>
                            <span>Description: <i><%= event.description %></i></span><br>
                            <span>Location: <%= event.location %></span><br>
                            <span>Start Date: <%= new Date(event.startDate).toLocaleString() %></span><br>
                        </div>
                        </li>
                    <% }) %>
                    <% } else { %>
                    <li>No events for this group.</li>
                    <% } %>
                </ul>
                </section>

            </section>
            <section class="small-container">
                <section class="History">
                <h2>History</h2>
                <ul>

                    
                </ul>
                </section>
            </section>
        </div>
    </div>  
</body>
</html>
